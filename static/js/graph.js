$(function() {
    $('#ns-model').on('change', function() {
        changeCount++;
        var plusMinus = String.fromCharCode(177);
        var figureValue1 = '0.216 dB';
        var figureValue2 = '0.192 dB';
        var figureValue3 = '0.431 dB';
        var endFigure;
        if ( changeCount % 3 == 0 ) {
            endFigure = figureValue1;
        }
        else if ( changeCount % 3 == 1 ) {
            endFigure = figureValue2;
        }
        else {
            endFigure = figureValue3;
        }
        $('#noise-figure').val(plusMinus + ' ' +endFigure);
    });

    $('#graph-btn').on('click', function(e) {
        e.preventDefault();
        $('#calc-display').hide();
        $('#graph-display').show();
        var count = 0;
        //data = [0.32175204624213144,0.33509119972432394,0.34565927827613285,0.35422232608668924,0.3612940352120023,0.3672290113358754,0.3722788921482359,0.376626748171126,0.38040874103552524,0.38372814031515223,0.3866646352282598,0.389280671155102,0.39162585686649576,0.39374009117173414,0.3956558212094947,0.39739970030078375,0.39899382315266413,0.40045665867010727,0.40180376316154315,0.4030483318579492,0.4042016298768406,0.4052733322457399,0.40627179458088997,0.40720427035690643,0.40807708665638814,0.4088957873607143,0.4096652506014018,0.4103897857081362,0.4110732137076849,0.4117189345377554,0.4123299834633498,0.4129090786651643,0.413458661569698,0.41398093117984036,0.414477873421428,0.4149512863295589,0.41540280174649585,0.415833904081906,0.41624594658896225,0.41664016553166094,0.4170176925552605,0.41737956552007915,0.41772673801679605,0.41806008774666004,0.4183804239214488,0.41868849381436957,0.41898498857336103,0.4192705483919093,0.41954576711867536,0.41981119637573416,0.42006734924543165,0.4203147035776702,0.4205537049624365,0.42078476940645704,0.42100828574772453,0.42122461783739346,0.42143410651478425,0.42163707139798845,0.4218338125098561,0.422024611756803,0.42220973427567043,0.42238942966221266,0.42256393309318396,0.4227334663525837,0.42289823877150967,0.4230584480899492,0.42321428124802246,0.423365915113264,0.4235135171499306,0.4236572460356476,0.4237972522301576,0.4239336785004797,0.4240666604062721,0.42419632674895347,0.4243227999876154,0.42444619662464056,0.4245666275634727,0.4246841984409676,0.4247990099362994,0.4249111580584102,0.4250207344136885,0.42512782645542097,0.4252325177165138,0.4253348880267037,0.4254350137155196,0.42553296780201283,0.425628820172289,0.4257226377457484,0.42581448463084826,0.42590442227113584,0.42599250958229995,0.4260788030808232,0.42616335700488844,0.4262462234280153,0.426327452365983,0.4264070918774723,0.4264851881588573,0.426561785633541,0.42663692703619893,0.42671065349226733,0.32175204624213144,0.33509119972432394,0.34565927827613285,0.35422232608668924,0.3612940352120023,0.3672290113358754,0.3722788921482359,0.376626748171126,0.38040874103552524,0.38372814031515223,0.3866646352282598,0.389280671155102,0.39162585686649576,0.39374009117173414,0.3956558212094947,0.39739970030078375,0.39899382315266413,0.40045665867010727,0.40180376316154315,0.4030483318579492,0.4042016298768406,0.4052733322457399,0.40627179458088997,0.40720427035690643,0.40807708665638814,0.4088957873607143,0.4096652506014018,0.4103897857081362,0.4110732137076849,0.4117189345377554,0.4123299834633498,0.4129090786651643,0.413458661569698,0.41398093117984036,0.414477873421428,0.4149512863295589,0.41540280174649585,0.415833904081906,0.41624594658896225,0.41664016553166094,0.4170176925552605,0.41737956552007915,0.41772673801679605,0.41806008774666004,0.4183804239214488,0.41868849381436957,0.41898498857336103,0.4192705483919093,0.41954576711867536,0.41981119637573416,0.42006734924543165,0.4203147035776702,0.4205537049624365,0.42078476940645704,0.42100828574772453,0.42122461783739346,0.42143410651478425,0.42163707139798845,0.4218338125098561,0.422024611756803,0.42220973427567043,0.42238942966221266,0.42256393309318396,0.4227334663525837,0.42289823877150967,0.4230584480899492,0.42321428124802246,0.423365915113264,0.4235135171499306,0.4236572460356476,0.4237972522301576,0.4239336785004797,0.4240666604062721,0.42419632674895347,0.4243227999876154,0.42444619662464056,0.4245666275634727,0.4246841984409676,0.4247990099362994,0.4249111580584102,0.4250207344136885,0.42512782645542097,0.4252325177165138,0.4253348880267037,0.4254350137155196,0.42553296780201283,0.425628820172289,0.4257226377457484,0.42581448463084826,0.42590442227113584,0.42599250958229995,0.4260788030808232,0.42616335700488844,0.4262462234280153,0.426327452365983,0.4264070918774723,0.4264851881588573,0.426561785633541,0.42663692703619893,0.42671065349226733];
        data = [0.3197685598067757,0.3319430186458613,0.3418297046908473,0.35000372541973884,0.3568675639138214,0.3627090938206223,0.36773875346344104,0.3721135326046571,0.3759527290930412,0.3793485169372084,0.38237318396112163,0.38508418809390016,0.387527755690591,0.38974148631993827,0.39175626809171277,0.39359770638506253,0.3952872037415605,0.3968427860455527,0.39827974169593766,0.3996111212231543,0.4008481315649499,0.4020004499772226,0.4030764760256813,0.4040835354288668,0.405028046137359,0.4059156545548731,0.4067513479733739,0.4075395479247673,0.4082841881197944,0.4089887798603482,0.4096564672105323,0.4102900737478224,0.4108921423550835,0.4114649692317606,0.412010633080152,0.41253102024631794,0.41302784645458257,0.4135026756618796,0.41395693646734905,0.4143919364389426,0.41480887465902905,0.41520885274187963,0.4155928845358018,0.41596190468943967,0.4163167762343901,0.41665829731332016,0.4169872071639036,0.4173041914527372,0.41760988704022367,0.41790488624587363,0.41818974067417136,0.4184649646528396,0.418731038328567,0.41898841045936946,0.41923750093766377,0.41947870307389934,0.4197123856668077,0.4199388948831923,0.4201585559673788,0.42037167479805376,0.4205785393081773,0.42077942078177266,0.42097457503989755,0.4211642435266919,0.4213486543051601,0.4215280229713486,0.4217025534945839,0.4218724389906953,0.42203786243431674,0.422198997315864,0.42235600824806824,0.4225090515265823,0.42265827564862346,0.4228038217933055,0.4229458242668846,0.4230844109159163,0.42321970351095334,0.4233518181032202,0.42348086535645457,0.42360695085592004,0.42373017539638297,0.42385063525073424,0.4239684224207111,0.4240836248711474,0.42419632674895347,0.42430660858801844,0.4244145475010442,0.4245202173592883,0.4246236889610895,0.4247250301900069,0.4248243061632696,0.4249215793712563,0.42501690980862905,0.4251103550976815,0.4252019706044338,0.4252918095479969,0.4253799231036299,0.4254663604999082,0.4255511691104066,0.4256343945402611];
        chartData = {
            labels: _.range(10,80, 1),
            //labels: [5.84,6.68,7.52,8.36,9.2,10.04,10.879999999999999,11.719999999999999,12.559999999999999,13.4,14.24,15.08,15.92,16.759999999999998,17.6,18.439999999999998,19.28,20.119999999999997,20.96,21.8,22.64,23.48,24.32,25.16,26.0,26.84,27.68,28.52,29.36,30.2,31.04,31.88,32.72,33.56,34.4,35.239999999999995,36.08,36.92,37.76,38.6,39.44,40.28,41.12,41.96,42.8,43.64,44.48,45.32,46.16,47.0,47.839999999999996,48.68,49.519999999999996,50.36,51.199999999999996,52.04,52.879999999999995,53.72,54.559999999999995,55.4,56.239999999999995,57.08,57.919999999999995,58.76,59.6,60.44,61.28,62.12,62.96,63.8,64.64,65.47999999999999,66.32,67.16,68.0,68.84,69.67999999999999,70.52,71.36,72.2,73.03999999999999,73.88,74.72,75.56,76.39999999999999,77.24,78.08,78.92,79.75999999999999,80.6,81.44,82.28,83.11999999999999,83.96,84.8,85.64,86.48,87.32,88.16,89.0],
            datasets: [
                {
                    strokeColor: "rgba(255,255,255,1)",
                    data: _.map(data, function(num) { if ( count < 100 ) { return num } count++; }),
                    //data: data
                },]
        };
        ctx = document.getElementById('myChart').getContext('2d');
        var myNewChart = new Chart(ctx).Line(chartData);
    });
});
